<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تجربة الشراء الذكية لمنتجات عافية</title>
    <style>
       /* استيراد الخطوط الحديثة */
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&family=Cairo:wght@400;700&display=swap');

/* تأثير الخلفية ثلاثية الأبعاد */
body {
    font-family: 'Tajawal', 'Cairo', sans-serif;
    text-align: center;
    background: linear-gradient(135deg, #e9f5db, #fefae0); /* ألوان طبيعية مستوحاة من عافية */
    padding: 20px;
    direction: rtl;
    margin: 0;
    overflow-x: hidden;
}

/* حركة الخلفية */
body::before {
    content: "";
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('https://www.transparenttextures.com/patterns/arches.png'); /* نقش خفيف */
    opacity: 0.1;
    z-index: -1;
}

/* الحاوية الأساسية */
.container {
    background: white;
    padding: 30px;
    border-radius: 15px;
    max-width: 600px;
    margin: auto;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    animation: fadeIn 1.5s ease-in-out;
}

/* تأثير دخول سلس */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* تأثير عائم ثلاثي الأبعاد */
.container:hover {
    transform: translateY(-5px);
    transition: 0.4s ease-in-out;
}

/* العناوين */
h2, h3 {
    color: #2a6a3d; /* لون عافية الأخضر */
    font-weight: bold;
    transition: 0.3s;
}

/* إضافة حركة عند تمرير الماوس */
h2:hover, h3:hover {
    transform: scale(1.05);
}

/* الأزرار */
.button {
    display: block;
    width: 100%;
    padding: 15px;
    margin: 10px 0;
    font-size: 18px;
    cursor: pointer;
    border: none;
    border-radius: 8px;
    background: #2a6a3d;
    color: white;
    transition: 0.3s;
    box-shadow: 0 4px 10px rgba(42, 106, 61, 0.2);
}

.button:hover {
    background: #218033;
    transform: scale(1.05);
}

/* إخفاء الأسئلة في البداية */
.hidden {
    display: none;
}

/* حقول الإدخال */
input {
    width: 90%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 8px;
    border: 1px solid #ccc;
    font-size: 16px;
    text-align: center;
    transition: 0.3s;
    display: block;
    margin-left: auto;
    margin-right: auto;
}


input:focus {
    border-color: #2a6a3d;
    box-shadow: 0 0 10px rgba(42, 106, 61, 0.3);
}

/* صور لكل قسم */
.image-container {
    text-align: center;
    margin-bottom: 20px;
}

.image-container img {
    width: 100%;
    border-radius: 10px;
    max-height: 250px;
    object-fit: cover;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

/* تأثير الزر عند النقر */
.button:active {
    transform: scale(0.95);
}

/* تخصيص نتيجة التوصيات */
#result {
    background-color: #f9f9f9;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    animation: fadeIn 1s ease-in-out;
}

#userNameDisplay {
    color: #d4a373;
    font-weight: bold;
    font-size: 22px;
}

/* فقاعات متحركة ثلاثية الأبعاد */
@keyframes floatingBubbles {
    0% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-15px) scale(1.05); }
    100% { transform: translateY(0px) scale(1); }
}

.floating-element {
    position: absolute;
    width: 50px;
    height: 50px;
    background: rgba(42, 106, 61, 0.2);
    border-radius: 50%;
    animation: floatingBubbles 4s infinite ease-in-out;
}

/* إضافة فقاعات في أماكن عشوائية */
.floating-1 { top: 10%; left: 10%; animation-duration: 6s; }
.floating-2 { top: 30%; left: 80%; animation-duration: 5s; }
.floating-3 { top: 60%; left: 50%; animation-duration: 7s; }
.floating-4 { top: 80%; left: 20%; animation-duration: 6.5s; }



/* زر المساعد الذكي */
.chatbot-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    background-color: #2a6a3d;
    color: white;
    font-size: 24px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease-in-out;
}

/* عند تمرير الماوس */
.chatbot-button:hover {
    transform: scale(1.1);
    background-color: #218033;
}

/* نافذة المساعد الذكي */
.chatbot-popup {
    position: fixed;
    bottom: 90px;
    right: 20px;
    background: white;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    text-align: center;
    width: 220px;
    display: none;
}

/* زر الرابط */
.chatbot-link {
    display: block;
    margin-top: 10px;
    padding: 8px;
    background: #2a6a3d;
    color: white;
    text-decoration: none;
    border-radius: 5px;
    transition: 0.3s;
}

/* عند تمرير الماوس على الرابط */
.chatbot-link:hover {
    background: #218033;
}

#mapContainer {
    margin: 20px auto;
    width: 100%;
    max-width: 600px;
    height: 300px;
    border: 2px solid #2a6a3d;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(42, 106, 61, 0.3);
  }


    </style>
</head>
<body>

    <div class="container">

        <div id="userInfo">
            <h3>يرجى إدخال معلوماتك</h3>
            <input type="text" id="userName" placeholder="أدخل اسمك" required>
            <input type="tel" id="userPhone" placeholder="أدخل رقم جوالك" required>
            <button class="button" onclick="startQuiz()">ابدأ</button>
        </div>
        
        <div id="question1" class="hidden">
            <h2>مرحبًا بك في تجربة الشراء الذكية لمنتجات عافية!</h2>

            <h3>ما هو هدفك الغذائي الرئيسي؟</h3>
            <button class="button" onclick="selectGoal('الصحة العامة')">الصحة العامة</button>
            <button class="button" onclick="selectGoal('إنقاص الوزن')">إنقاص الوزن</button>
            <button class="button" onclick="selectGoal('زيادة الطاقة')">زيادة الطاقة</button>
            <button class="button" onclick="selectGoal('بناء العضلات')">بناء العضلات</button>
            <button class="button" onclick="selectGoal('تحسين الهضم')">تحسين الهضم</button>
        </div>

        <div id="question2" class="hidden">
            <h3>هل تتبع نظامًا غذائيًا معينًا؟</h3>
            <button class="button" onclick="selectDiet('نباتي')">نباتي</button>
            <button class="button" onclick="selectDiet('كيتو')">كيتو</button>
            <button class="button" onclick="selectDiet('خالي من الجلوتين')">خالي من الجلوتين</button>
            <button class="button" onclick="selectDiet('منخفض الكربوهيدرات')">منخفض الكربوهيدرات</button>
            <button class="button" onclick="selectDiet('لا شيء مما سبق')">لا شيء مما سبق</button>
        </div>

        <div id="question3" class="hidden">
            <h3>ما هي وجبتك المفضلة في اليوم؟</h3>
            <button class="button" onclick="selectMeal('الإفطار')">الإفطار</button>
            <button class="button" onclick="selectMeal('الغداء')">الغداء</button>
            <button class="button" onclick="selectMeal('العشاء')">العشاء</button>
            <button class="button" onclick="selectMeal('وجبة خفيفة')">وجبة خفيفة</button>
        </div>

        <div id="question4" class="hidden">
            <h3>ما هي النكهات التي تفضلها؟</h3>
            <button class="button" onclick="selectFlavor('حلو')">حلو</button>
            <button class="button" onclick="selectFlavor('مالح')">مالح</button>
            <button class="button" onclick="selectFlavor('حار')">حار</button>
            <button class="button" onclick="selectFlavor('حامض')">حامض</button>
        </div>

        <div id="question5" class="hidden">
            <h3>هل لديك أي حساسية تجاه أطعمة معينة؟</h3>
            <button class="button" onclick="selectAllergy('المكسرات')">المكسرات</button>
            <button class="button" onclick="selectAllergy('الجلوتين')">الجلوتين</button>
            <button class="button" onclick="selectAllergy('اللاكتوز')">اللاكتوز</button>
            <button class="button" onclick="selectAllergy('لا توجد')">لا توجد</button>
        </div>

        <div id="result" class="hidden">
            <h3>مرحبًا <span id="userNameDisplay" style="color: #007bff; font-weight: bold;"></span>! هذه هي التوصيات الخاصة بك:</h3>
            <h3>المنتجات الموصى بها من عافية</h3>
            <ul id="productList"></ul>
            <h3>اقتراحات للطهاة</h3>
            <p id="recipe"></p>

            <div id="mapContainer">
                <iframe 
                  src="https://maps.google.com/maps?q=عافيه%20بنده%20لوكيشن&hl=ar&z=11&output=embed" 
                  width="100%" 
                  height="100%" 
                  style="border:0;" 
                  allowfullscreen="" 
                  loading="lazy">
                </iframe>

  </div>
  
            <button class="button" onclick="restart()">إعادة الاختيار</button>
        </div>
    </div>




    <!-- زر المساعد الذكي -->
<div class="chatbot-button" onclick="toggleChatbot()">
    🤖
</div>

<!-- نافذة المساعد الذكي -->
<div id="chatbotPopup" class="chatbot-popup hidden">
    <p>هل تحتاج إلى مساعدة؟:</p>
    <a href="https://chatgpt.com/g/g-67afc7ed57888191903933fe67917aee-wsl" target="_blank" class="chatbot-link">اضغط هنا</a>
</div>


    <script>
      let userSelections = {
    name: "",
    phone: "",
    goal: "",
    diet: "",
    meal: "",
    flavor: "",
    allergy: ""
};


function startQuiz() {
    let name = document.getElementById("userName").value.trim();
    let phone = document.getElementById("userPhone").value.trim();

    if (name === "" || phone === "") {
        alert("يرجى إدخال اسمك ورقم الجوال قبل المتابعة!");
        return;
    }

    userSelections.name = name;
    userSelections.phone = phone;

    // تحديث اسم المستخدم في التوصيات
    document.getElementById("userNameDisplay").innerText = name;

    // إخفاء إدخال البيانات وإظهار الأسئلة
    document.getElementById("userInfo").classList.add("hidden");
    document.getElementById("question1").classList.remove("hidden");

    // إرسال البيانات إلى Google Sheets
    sendDataToGoogleSheets(name, phone);
}

function sendData() {
    let name = document.getElementById("userName").value.trim();
    let phone = document.getElementById("userPhone").value.trim();

    if (name === "" || phone === "") {
        alert("⚠️ يرجى إدخال اسمك ورقم الجوال قبل المتابعة!");
        return;
    }

    let data = { name: name, phone: phone };

    fetch("https://script.google.com/macros/s/AKfycbznBGPeR9zhNZQ-g0fiLJtRTVzCtZsz-Xyw-2HPXkKkGXqy3FW0Y1JrJ6BeFb6x8nGM1g/exec", { // استبدل بالرابط الذي نسخته من Apps Script
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    }).then(response => {
        alert("✅ تم إرسال البيانات بنجاح!");
    }).catch(error => {
        alert("❌ حدث خطأ أثناء الإرسال: " + error);
    });
}


        const productRecommendations = {
            "الصحة العامة": {
                "نباتي": ["عافية لوز مقشر", "عافية قراصيا", "عافية فواكه ومكسرات مشكلة"],
                "كيتو": ["عافية فستق مقشر", "عافية جوز البيكان", "عافية مسحوق اللوز"],
                "خالي من الجلوتين": ["عافية صنوبر", "عافية عين الجمل", "عافية شرائح اللوز"],
                "منخفض الكربوهيدرات": ["عافية لوز مقشر أنصاف", "عافية فستق بقشره", "عافية مسحوق الفستق"],
                "لا شيء مما سبق": ["عافية حبات الكاجو جامبو", "عافية شراح اللوز طويلة رفيعة", "عافية لوز مقشر جامبو"]
            },
            "إنقاص الوزن": {
                "نباتي": ["عافية قراصيا", "عافية لوز عضوي", "عافية فواكه ومكسرات مشكلة"],
                "كيتو": ["عافية فستق مقشر", "عافية عين الجمل عضوي", "عافية مسحوق اللوز"],
                              "خالي من الجلوتين": ["عافية صنوبر", "عافية جوز البيكان", "عافية شرائح اللوز"],
                "منخفض الكربوهيدرات": ["عافية فستق بقشره", "عافية مسحوق اللوز", "عافية لوز مقشر"],
                "لا شيء مما سبق": ["عافية تمر سكري", "عافية فواكه مجففة مشكلة", "عافية مكسرات مشكلة"]
            },
            "زيادة الطاقة": {
                "نباتي": ["عافية تمر مجفف", "عافية فواكه مجففة", "عافية مكسرات مشكلة"],
                "كيتو": ["عافية زبدة اللوز", "عافية جوز الهند المجفف", "عافية فستق"],
                "خالي من الجلوتين": ["عافية لوز محمص", "عافية تمر سكري", "عافية مكسرات مشكلة"],
                "منخفض الكربوهيدرات": ["عافية فستق بقشره", "عافية مسحوق اللوز", "عافية زبدة الكاجو"],
                "لا شيء مما سبق": ["عافية حبوب الكينوا", "عافية لوز كامل", "عافية بذور دوار الشمس"]
            },
            "بناء العضلات": {
                "نباتي": ["عافية فول سوداني", "عافية بذور الكتان", "عافية مسحوق اللوز"],
                "كيتو": ["عافية زبدة الفستق", "عافية جوز البيكان", "عافية عين الجمل"],
                "خالي من الجلوتين": ["عافية بذور الشيا", "عافية لوز كامل", "عافية فواكه مجففة"],
                "منخفض الكربوهيدرات": ["عافية مسحوق الفستق", "عافية زبدة اللوز", "عافية صنوبر"],
                "لا شيء مما سبق": ["عافية مكسرات مشكلة", "عافية بذور دوار الشمس", "عافية حبوب الكينوا"]
            },
            "تحسين الهضم": {
                "نباتي": ["عافية زنجبيل مطحون", "عافية عسل طبيعي", "عافية بذور الشمر"],
                "كيتو": ["عافية قرفة عضوية", "عافية شاي أعشاب", "عافية بذور الكتان"],
                "خالي من الجلوتين": ["عافية زنجبيل مطحون", "عافية عسل نحل", "عافية لبن جوز الهند"],
                "منخفض الكربوهيدرات": ["عافية بذور دوار الشمس", "عافية زبدة اللوز", "عافية مسحوق القرفة"],
                "لا شيء مما سبق": ["عافية عسل سدر", "عافية مكسرات مشكلة", "عافية فواكه مجففة"]
            }
        };

        const chefSuggestions = {
            "الصحة العامة": "استخدم زيت الزيتون مع السلطات، وأضف اللوز والتمر المجفف للحصول على طاقة طبيعية.",
            "إنقاص الوزن": "استخدم بذور الشيا وبذور الكتان في تحضير العصائر الصحية لإنقاص الوزن.",
            "زيادة الطاقة": "تناول التمر المجفف مع زبدة اللوز للحصول على طاقة فورية قبل التمارين.",
            "بناء العضلات": "أضف زبدة الفستق ومسحوق اللوز إلى وجباتك لزيادة نسبة البروتين.",
            "تحسين الهضم": "استخدم الزنجبيل والقرفة في تحضير الشاي الدافئ لدعم الجهاز الهضمي."
        };

        function selectGoal(goal) {
            userSelections.goal = goal;
            document.getElementById("question1").classList.add("hidden");
            document.getElementById("question2").classList.remove("hidden");
        }

        function selectDiet(diet) {
            userSelections.diet = diet;
            document.getElementById("question2").classList.add("hidden");
            document.getElementById("question3").classList.remove("hidden");
        }

        function selectMeal(meal) {
            userSelections.meal = meal;
            document.getElementById("question3").classList.add("hidden");
            document.getElementById("question4").classList.remove("hidden");
        }

        function selectFlavor(flavor) {
            userSelections.flavor = flavor;
            document.getElementById("question4").classList.add("hidden");
            document.getElementById("question5").classList.remove("hidden");
        }

        function selectAllergy(allergy) {
            userSelections.allergy = allergy;
            document.getElementById("question5").classList.add("hidden");
            showResults();
        }

        function showResults() {
            document.getElementById("userNameDisplay").innerText = userSelections.name;

            document.getElementById("result").classList.remove("hidden");

            let selectedProducts = productRecommendations[userSelections.goal][userSelections.diet] || [];
            document.getElementById("productList").innerHTML = selectedProducts.map(item => `<li>${item}</li>`).join("");
            document.getElementById("recipe").innerText = chefSuggestions[userSelections.goal];
        }

        function restart() {
            location.reload();
        }

        function toggleChatbot() {
    var popup = document.getElementById("chatbotPopup");
    popup.style.display = popup.style.display === "block" ? "none" : "block";
}

    </script>

</body>
</html>
